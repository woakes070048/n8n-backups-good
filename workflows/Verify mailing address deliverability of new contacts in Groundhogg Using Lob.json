{
  "active": false,
  "connections": {
    "Switch": {
      "main": [
        [
          {
            "node": "Update Groundhogg - Deliverable",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update Groundhogg - NOT Deliverable",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Address Fields": {
      "main": [
        [
          {
            "node": "Address Verification",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "CRM Webhook Trigger": {
      "main": [
        [
          {
            "node": "Set Address Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Address Verification": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2024-04-28T03:02:11.798Z",
  "id": "Hrod1NJh0n8VDlAX",
  "meta": {
    "templateCredsSetupCompleted": true,
    "templateId": "2225"
  },
  "name": "Verify mailing address deliverability of new contacts in Groundhogg Using Lob",
  "nodes": [
    {
      "parameters": {
        "content": "## Purpose \nTo verify the mailing address for new contacts in Groundhogg CRM. \n\nWhenever I add a new contact to Groundhogg CRM, I run this automation to ensure I have a valid mailing address. It also helps me check for misspellings if the contact address was manually entered.\n\nQuick Video Overview:\n\nhttps://www.youtube.com/watch?v=nrV0P0Yz8FI",
        "height": 428,
        "width": 747
      },
      "id": "8a22d40f-5b09-485a-8d58-70f36821ee9f",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        380,
        240
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "Update Groundhogg CRM to indicate if the address is deliverable.\n\nPossible Options: \n- Add Tag\n- Add Note\n- Start Automation\n- Update a Field\n\nFor Deliverable Addresses - I apply a tag that the address was verified.\n\nFor Non Deliverable Addresses - I apply a tag, which triggers an automation for my team to manually verify the address. You could also trigger an automation to reach out to the contact to verify their address.\n\n",
        "height": 763,
        "width": 561.9462602626872,
        "color": 5
      },
      "id": "d59b4ac3-5b41-4913-8b41-401a4eac8cc0",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1520,
        320
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "Receive a webhook from your CRM with the contact address fields",
        "height": 339,
        "color": 4
      },
      "id": "6a5d3833-a256-4b57-96dc-6a08886b65ee",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        560,
        700
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8216105e-23ad-4c5c-8f4a-4f97658e0947",
              "name": "address",
              "type": "string",
              "value": "={{ $json.address }}"
            },
            {
              "id": "111da971-2473-4c5e-a106-22589cf47daf",
              "name": "address2",
              "type": "string",
              "value": ""
            },
            {
              "id": "ed62cf39-10f1-42f6-b18f-bfa58b4fe646",
              "name": "city",
              "type": "string",
              "value": "={{ $json.city }}"
            },
            {
              "id": "d9550200-04ac-4cf4-b7e6-cd40b793ce97",
              "name": "state",
              "type": "string",
              "value": "={{ $json.state }}"
            },
            {
              "id": "62269d11-c98c-4016-83ef-291176f2fc12",
              "name": "zip",
              "type": "string",
              "value": "={{ $json.zip_code }}"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "id": "4fe1597b-ea03-439a-898b-a968cbd84511",
      "name": "Set Address Fields",
      "type": "n8n-nodes-base.set",
      "position": [
        880,
        780
      ],
      "typeVersion": 3.3
    },
    {
      "parameters": {
        "content": "1. Create an Account a LOB.com\n2. Create API Key (https://help.lob.com/account-management/api-keys)\n3. Update Node with your Credentials (Basic Auth)",
        "height": 216,
        "width": 430,
        "color": 3
      },
      "id": "ac13a2be-07fa-4861-99ab-9af8fe797db3",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1040,
        980
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "727deb6f-9d10-4492-92e6-38f3292510b0",
        "options": {}
      },
      "id": "04c286c0-8862-40f9-960d-902b3c89a6ee",
      "name": "CRM Webhook Trigger",
      "type": "n8n-nodes-base.webhook",
      "position": [
        640,
        780
      ],
      "webhookId": "a2df5279-0c49-49c1-83a3-cb1179930e91",
      "typeVersion": 1.1
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=webhook listener from Groundhogg funnel",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "tag",
              "value": "Mailing Address Deliverable"
            },
            {
              "name": "id",
              "value": "={{ $('CRM Webhook Trigger').item.json.id }}"
            }
          ]
        },
        "options": {}
      },
      "id": "c091dc5f-5527-43ca-b257-c977d654c13b",
      "name": "Update Groundhogg - Deliverable",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1840,
        640
      ],
      "typeVersion": 4.1
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=webhook listener from Groundhogg funnel",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "tag",
              "value": "Mailing Address NOT Deliverable"
            },
            {
              "name": "id",
              "value": "={{ $('CRM Webhook Trigger').item.json.id }}"
            }
          ]
        },
        "options": {}
      },
      "id": "1449b6e2-1c4f-4f75-8280-aab3c993f0ac",
      "name": "Update Groundhogg - NOT Deliverable",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1840,
        860
      ],
      "typeVersion": 4.1
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.lob.com/v1/us_verifications",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "primary_line",
              "value": "={{ $json.address }}"
            },
            {
              "name": "secondary_line",
              "value": "={{ $json.address2 }}"
            },
            {
              "name": "city",
              "value": "={{ $json.city }}"
            },
            {
              "name": "state",
              "value": "={{ $json.state }}"
            },
            {
              "name": "zip_code",
              "value": "={{ $json.zip_code }}"
            }
          ]
        },
        "options": {}
      },
      "id": "a79eb361-7dc8-4838-bb40-b34bf35c3102",
      "name": "Address Verification",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1180,
        780
      ],
      "typeVersion": 4.1
    },
    {
      "parameters": {
        "dataType": "string",
        "value1": "={{ $json.deliverability }}",
        "rules": {
          "rules": [
            {
              "value2": "=deliverable",
              "outputKey": "deliverable"
            },
            {
              "operation": "notEqual",
              "value2": "deliverable",
              "outputKey": "NOT deliverable"
            }
          ]
        }
      },
      "id": "71c9199f-823c-451b-baf5-a2b5de1697c1",
      "name": "Switch",
      "type": "n8n-nodes-base.switch",
      "position": [
        1540,
        780
      ],
      "typeVersion": 2
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2024-04-28T03:02:11.798Z",
  "versionId": "edda5a4d-f715-49c0-8de1-3e159a6e889d"
}